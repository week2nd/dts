<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="match">

	<!-- 경기 전체 보기 -->
	<select id="getMatchList" parameterType="match" resultType="match">
		SELECT	RANK() OVER(ORDER BY WIN DESC, LOSE ASC) rank,
				TEAM_ID,
				DIRECTOR,
				HEAD_COACH,
				NAME,
				WIN,
				LOSE,
				RATE
		FROM 	TEAM
	</select>
	
	
	<select id="getMatch" parameterType="match" resultType="match">
		SELECT 	*
		FROM	(SELECT	RANK() OVER(ORDER BY WIN DESC, LOSE ASC) rank,	
						TEAM_ID,
						DIRECTOR,
						HEAD_COACH,
						NAME,
						WIN,
						LOSE,
						RATE
				FROM 	TEAM)
		WHERE	TEAM_ID = #{matchId}
	</select>
	
	<insert id="insertMatch" parameterType="match">
		INSERT INTO TEAM(TEAM_ID, 
						DIRECTOR, 
						HEAD_COACH, 
						NAME)
  		VALUES			(#{matchId},
  						#{director},
  						#{headCoach},
  						#{name})
	</insert>
	
	<update id="updateMatch" parameterType="match">
		UPDATE	TEAM
		SET		TEAM_ID = #{matchId},
				DIRECTOR = #{director},
				HEADCOACH = #{headCoach},
				NAME = #{name}
		WHERE	TEAM_ID = #{matchId}
	</update>
	
	<delete id="deleteMatch" parameterType="match">
		DELETE	TEAM
		WHERE	TEAM_ID = #{matchId}
	</delete>
</mapper>